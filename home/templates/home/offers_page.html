{% extends "base.html" %}

{% load static wagtailcore_tags wagtailimages_tags %}

{% block body_class %}template-homepage{% endblock %}

{% block extra_css %}
{% endblock %}


{% block content %}

        <section class="deep-yellow mp-content">
        <div class="container">
        <div class="list-group">
    {% for item in page.special_offers.all %}
        <a href="javascript:void(0)" class="list-group-item">
            {% if item.image %}
                {% image item.image fill-60x60-c100 style="float:left;" %}
            {% else %}
                {% image page.default_offer_image fill-60x60-c100 style="float:left;" %}
            {% endif %}
            <h4 class="list-group-item-heading spec-offer" onclick="offerModal({{ item.id }})">{{ item.title }}</h4>
            <div id="offerModal_{{ item.id }}" class="modal fade" role="dialog">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">{{ item.title }}</h4>
                  </div>
                  <div class="modal-body spec-offer-body">
                    {% if item.image %}
                        {% image item.image fill-60x60-c100 style="float:left;" %}
                    {% else %}
                        {% image page.default_offer_image fill-60x60-c100 style="float:left;" %}
                    {% endif %}
                    <h5 class="spec-offer">{{ item.text | richtext}}</h5>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn-custom-modal btn btn-default" onclick="formModal('Меня интересует спецпредложение \'{{ item.title }}\'')">Оставить заявку</button><button type="button" class="btn btn-default" data-dismiss="modal">Закрыть</button>
                  </div>
                </div>
              </div>
            </div>
        </a>
    {% endfor %}
        </div>
        </div>
        </section>



    <div id="formModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Оставить заявку</h4>
          </div>
          <div class="modal-body">
              {% include "./form.html" %}
          </div>
        </div>
      </div>
    </div>

    {% if messages %}
        {% for message in messages %}
            <div id="messageModal" class="modal fade" role="dialog">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">{{ message }}</h4>
                  </div>
                    {% if form.non_field_errors %}
                        <div class="modal-body">
                            <h3>{{ form.non_field_errors }}</h3>
                        </div>
                    {% endif %}
                  <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">ОК</button>
                  </div>
                </div>
              </div>
            </div>
            <script>
                $("#messageModal").modal();
            </script>
        {% endfor %}
    {% endif %}

{#    <a href="#" class="scrollToTop" style="background: url({% static "img/scroll_to_top.png" %}) 0 0 / cover; display: block;"></a>#}

{% endblock %}


{%  block extra_js %}
    {% if form_failed %}
        <script type="text/javascript">
            formModal('{{ form.comment.value }}')
        </script>
    {% endif %}
{% endblock %}